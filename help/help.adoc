
Plugin Version @PLUGIN_VERSION@
Revised on January 23, 2019

== Integrated versions

This plugin was developed and tested against following IBM DB2 server:

* IBM DB2 V11.1

List of supported platforms:

* Linux
* IBM AIX
* IBM zOS
* Windows

[[prerequisites]]
== Plugin prerequisites

* The JDBC Driver jar for IBM DB2 should be copied to the ElectricFlow agent Machine.
* In addition, if the database on which DB2 is installed is zOS the license jar required to connect to IBM DB2 should be copied to the ElectricFlow agent machine. Refer to IBM documentation for more details on using the right license.

NOTE: This plugin was tested with db2jcc_license_cisuz.jar.

[[setupconfig]]
=== Setting up the plugin configuration

Plugin configurations are sets of parameters that apply across some or all of the plugin procedures. They reduce repetition of common values, create predefined sets of parameters for end users, and store credentials securely. Each configuration has a unique name that is automatically entered in designated parameters in the procedures.

==== Input

In the Main Menu, click menu:Admin[Plugins] to open the Plugin Manager.

Find the EC-DB2 row.

Click *Configure* to open the DB2 Configurations page.

Click *Create Configuration*.

To create a DB2 configuration, enter the following information and click *OK*.

Remember that you may need to create additional configurations later.

[cols=",",options="header",]
|===
|Parameter |Description
|Configuration Name |Name of the plugin configuration.
|Description |Description for the plugin configuration.
|DB2 server address |Address of DB2 server. Example: db2-local
|DB2 server port |Port of DB2 server. By default 50000.
|Database name |Name of DB2 database to connect.
|Driver path |Absolute path to the DB2 jdbc driver jar. For example /opt/ibm/drivers/db2jcc.jar  
|License path |Refer to the pre-requisites section to determine if this license is required. Absolute path to the DB2 jdbc license jar. For example /opt/ibm/licenses/db2jcc_license_cisuz.jar
|Credential a|
* *User Name*: Enter the name of the IBM DB2 user.
* *Password*: Enter the password for the IBM DB2 user name.
* *Retype Password*: Re-enter the password for the IBM DB2 user name.

|===

image::cloudbees-common::cd-plugins/ec-db2/config/configform.png[image]

==== Output

The DB2 Configurations page now shows the new configuration.

You can also manage your DB2 configurations in this page. Click *Edit* to modify an existing configuration or *Delete* to remove an existing configuration.

[[procedures]]
== Plugin procedures

[[ExecuteSQL]]
=== ExecuteSQL

This procedure executes SQL query against IBM DB2 server.

==== Input

. In the Main Menu, click *Admin* > *Plugins* to open the Plugin Manager.
. Got to the EC-DB2 plugin.
. Go to the ExecuteSQL procedure.
. Enter the following parameters:


[cols=",",options="header",]
|===
|Parameter |Description
|Configuration name |Name of the configuration to be used. URL and credentials are retrieved from the given configuration. A Configuration defines connection details and can be created by going to plugin configuration page.
|SQL statement |SQL query to execute.
|Path to SQL file |Path to file that contains SQL request.
|Output properties path |Path for result properties. If query is select, all information will be stored as JSON array, otherwise affected rows count will be stored as JSON object.
|===

==== To do an insert

image::cloudbees-common::cd-plugins/ec-db2/executesql/insertform.png[image]

Output:

After the job runs, you can view the results on the Job Details page in ElectricFlow. The status of the page was checked successfully.

image::cloudbees-common::cd-plugins/ec-db2/executesql/insertjobstatus.png[image]

In the *ExecuteSQL* step, click the Log button to see the diagnostic information:

image::cloudbees-common::cd-plugins/ec-db2/executesql/insertjoblog.png[image]

==== To do a select

image::cloudbees-common::cd-plugins/ec-db2/executesql/selectform.png[image]

Output:

After the job runs, you can view the results on the Job Details page in ElectricFlow. The status of the page was checked successfully.

image::cloudbees-common::cd-plugins/ec-db2/executesql/selectjobstatus.png[image]

In the *ExecuteSQL* step, click the Log button to see the diagnostic information:

image::cloudbees-common::cd-plugins/ec-db2/executesql/selectjoblog.png[image]

[[rns]]
== Release notes

=== EC-DB2 1.0.3

* The documentation has been migrated to the main documentation site.

=== EC-DB2 1.0.2

* The plugin icon has been updated.

=== EC-DB2 1.0.1

* Fixed non-ascii characters in help.

=== EC-DB2 1.0.0

* Initial plugin release with following procedures:
** ExecuteSQL.
